{"title":"51单片机-模块化编程","uid":"746936c330f59bbc3420fd4970ee32dd","slug":"51单片机-模块化编程","date":"2024-02-03T04:25:17.000Z","updated":"2024-02-03T15:27:41.615Z","comments":true,"path":"api/articles/51单片机-模块化编程.json","keywords":null,"cover":[],"content":"<h1 id=\"模块化编程\"><a href=\"#模块化编程\" class=\"headerlink\" title=\"模块化编程\"></a>模块化编程</h1><p><strong>传统方式编程</strong>：所有的函数均存放在 main.c 文件里，使用模块较多，则一个文件会包含很多代码，不方便代码的组织和管理，而且在一定程度上会影响编程者的思路</p>\n<p><strong>模块化编程</strong>：把各个模块的代码放在不同的.c 文件里，在.h 文件里提供外部可调用函数的声明，其他.c 文件想使用其中的代码只需要#include “XXX.h” 文件即可。使用模块化编程可极大提高代码的可阅读、可维护、可移植性。</p>\n<p><strong>.c文件</strong>所包含的是函数和变量的定义</p>\n<p><strong>.h文件</strong>包含的是可被外部调用的函数和函数的声明</p>\n<p>下面流程框图是函数模块化的具体操作。</p>\n<img src=\"/post/51%E5%8D%95%E7%89%87%E6%9C%BA-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B/image1.png\" alt=\"image-20240203123200459\" style=\"zoom:67%;\">\n\n<ol>\n<li>在.c 文件中直接定义函数</li>\n<li>在.h 函数中声明函数</li>\n<li>在主函数中#include</li>\n</ol>\n<p>以上是Delay函数的模块化操作，下面我来演示一下我们在使用数码管时调用的数码管函数模块化</p>\n<p>可以看到下列代码的Delay函数和Nixie函数都是定义在main.c中的，我们要把Nixie函数模块化</p>\n<img src=\"/post/51%E5%8D%95%E7%89%87%E6%9C%BA-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B/image2.png\" alt=\"image-20240203163007878\" style=\"zoom: 67%;\">\n\n<p>先创建一个新文件，命名和函数名相同即可</p>\n<p><img src=\"/post/51%E5%8D%95%E7%89%87%E6%9C%BA-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B/image3.png\" alt=\"image-20240203163412242\" style=\"zoom:50%;\"><img src=\"/post/51%E5%8D%95%E7%89%87%E6%9C%BA-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B/image4.png\" alt=\"image-20240203163455736\" style=\"zoom:50%;\"></p>\n<p>然后将函数体剪切到刚刚创建的Nixie文件中（注意，由于函数中使用到了P0接口，P0接口是定义在头文件REGX52.H中的，我们需要在.c文件中includeREGX52.h头文件）</p>\n<img src=\"/post/51%E5%8D%95%E7%89%87%E6%9C%BA-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B/image8.png\" alt=\"image-20240203164705716\" style=\"zoom: 67%;\">\n\n<p>接着以相同的步骤，创建一个后缀为.h的头文件，命名和函数名相同</p>\n<img src=\"/post/51%E5%8D%95%E7%89%87%E6%9C%BA-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B/image6.png\" alt=\"image-20240203163922744\" style=\"zoom: 50%;\">\n\n<p>在其中声明我们的函数</p>\n<img src=\"/post/51%E5%8D%95%E7%89%87%E6%9C%BA-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B/image7.png\" alt=\"image-20240203164315426\" style=\"zoom:67%;\">\n\n<p>最后在主函数头文件中include一下，就可以在main.c的函数体中使用了</p>\n<img src=\"/post/51%E5%8D%95%E7%89%87%E6%9C%BA-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B/image9.png\" alt=\"image-20240203183731798\" style=\"zoom:67%;\">\n","text":"模块化编程传统方式编程：所有的函数均存放在 main.c 文件里，使用模块较多，则一个文件会包含很多代码，不方便代码的组织和管理，而且在一定程度上会影响编程者的...","permalink":"/post/51单片机-模块化编程","photos":[],"count_time":{"symbolsCount":606,"symbolsTime":"1 mins."},"categories":[{"name":"51单片机","slug":"51单片机","count":6,"path":"api/categories/51单片机.json"}],"tags":[{"name":"电子","slug":"电子","count":7,"path":"api/tags/电子.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E5%8C%96%E7%BC%96%E7%A8%8B\"><span class=\"toc-text\">模块化编程</span></a></li></ol>","author":{"name":"Ed-RYan","slug":"blog-author","avatar":"https://picdl.sunbangyan.cn/2024/01/27/b3236412f4a1762b08031ab7af587235.webp","link":"/","description":"想暂停时间 <br /> @ <b>淼淼淼淼淼淼淼</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"QQ":{"icon":"iconfont icon-tengxunQQ","link":"https://picdl.sunbangyan.cn/2024/01/21/8f2f70af10b4f0d5d6f32559116ba096.jpeg"},"Bilibili":{"icon":"iconfont icon-bilibili","link":"https://space.bilibili.com/142342578?spm_id_from=333.1007.0.0"},"Wechat":{"icon":"iconfont icon-weixin","link":"https://picdl.sunbangyan.cn/2024/01/21/42a74c77817f8c7588ebeedffd7e94e3.jpeg"},"WechatPay":{"icon":"iconfont icon-weixinzhifu","link":"https://picss.sunbangyan.cn/2024/01/21/42669be5c178707607662c75477734a8.jpeg"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"51单片机原理及应用","uid":"0c7c5c12646ceac7713a737866b0b523","slug":"51单片机基础","date":"2024-01-26T15:30:39.000Z","updated":"2024-02-27T13:29:46.845Z","comments":true,"path":"api/articles/51单片机基础.json","keywords":null,"cover":"https://picdm.sunbangyan.cn/2024/02/27/82daa9f37704b8d40e4ed39570079d0e.jpeg","text":"51 单片机原理及应用第一章 51 单片机基础知识单片机的发展及概述微机、微处理器、单片机概念从使用角度来讲，计算机可以分为广泛的 通用计算机系统 和 嵌入式计...","permalink":"/post/51单片机基础","photos":[],"count_time":{"symbolsCount":"6k","symbolsTime":"5 mins."},"categories":[{"name":"51单片机","slug":"51单片机","count":6,"path":"api/categories/51单片机.json"}],"tags":[{"name":"电子","slug":"电子","count":7,"path":"api/tags/电子.json"}],"author":{"name":"Ed-RYan","slug":"blog-author","avatar":"https://picdl.sunbangyan.cn/2024/01/27/b3236412f4a1762b08031ab7af587235.webp","link":"/","description":"想暂停时间 <br /> @ <b>淼淼淼淼淼淼淼</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"QQ":{"icon":"iconfont icon-tengxunQQ","link":"https://picdl.sunbangyan.cn/2024/01/21/8f2f70af10b4f0d5d6f32559116ba096.jpeg"},"Bilibili":{"icon":"iconfont icon-bilibili","link":"https://space.bilibili.com/142342578?spm_id_from=333.1007.0.0"},"Wechat":{"icon":"iconfont icon-weixin","link":"https://picdl.sunbangyan.cn/2024/01/21/42a74c77817f8c7588ebeedffd7e94e3.jpeg"},"WechatPay":{"icon":"iconfont icon-weixinzhifu","link":"https://picss.sunbangyan.cn/2024/01/21/42669be5c178707607662c75477734a8.jpeg"}}}},"feature":true},"next_post":{"title":"51单片机数码管","uid":"72468961c9322689b5ba89f282674665","slug":"51单片机数码管","date":"2024-02-02T16:09:03.000Z","updated":"2024-02-03T04:24:19.554Z","comments":true,"path":"api/articles/51单片机数码管.json","keywords":null,"cover":"https://picst.sunbangyan.cn/2024/02/03/9d39c6b369670f76de58683260b82013.webp","text":"数码管数码管在开发板的左上角位置，是一种简单廉价的显示器，由多个发光二极管封装在一起组成的“8”字型器件 数码管分为共阳极和共阴极类型 根据开发板原理图如下 数...","permalink":"/post/51单片机数码管","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"51单片机","slug":"51单片机","count":6,"path":"api/categories/51单片机.json"}],"tags":[{"name":"电子","slug":"电子","count":7,"path":"api/tags/电子.json"}],"author":{"name":"Ed-RYan","slug":"blog-author","avatar":"https://picdl.sunbangyan.cn/2024/01/27/b3236412f4a1762b08031ab7af587235.webp","link":"/","description":"想暂停时间 <br /> @ <b>淼淼淼淼淼淼淼</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"QQ":{"icon":"iconfont icon-tengxunQQ","link":"https://picdl.sunbangyan.cn/2024/01/21/8f2f70af10b4f0d5d6f32559116ba096.jpeg"},"Bilibili":{"icon":"iconfont icon-bilibili","link":"https://space.bilibili.com/142342578?spm_id_from=333.1007.0.0"},"Wechat":{"icon":"iconfont icon-weixin","link":"https://picdl.sunbangyan.cn/2024/01/21/42a74c77817f8c7588ebeedffd7e94e3.jpeg"},"WechatPay":{"icon":"iconfont icon-weixinzhifu","link":"https://picss.sunbangyan.cn/2024/01/21/42669be5c178707607662c75477734a8.jpeg"}}}}}}